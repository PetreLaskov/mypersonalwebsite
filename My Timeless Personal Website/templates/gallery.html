<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$if(title)$$title$ - $endif$$if(site-title)$$site-title$$else$Your Name$endif$</title>
    $if(description)$<meta name="description" content="$description$">$endif$
    <meta name="author" content="$if(author)$$author$$else$Your Name$endif$">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="$if(title)$$title$$else$Art Gallery$endif$">
    $if(description)$<meta property="og:description" content="$description$">$endif$
    $if(url)$<meta property="og:url" content="$url$">$endif$
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/artwork.css">
    $if(css)$$for(css)$<link rel="stylesheet" href="$css$">$endfor$$endif$
    
    <!-- Dark mode preference -->
    <script>
        if (localStorage.getItem('theme') === 'dark' || 
            (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }
    </script>
</head>
<body>
    <header>
        <nav>
            <a href="/" class="site-title">$if(site-title)$$site-title$$else$Your Name$endif$</a>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/essays">Essays</a></li>
                <li><a href="/art" class="active">Art</a></li>
                <li><a href="/about">About</a></li>
            </ul>
            <button id="theme-toggle" aria-label="Toggle dark mode">ðŸŒ™</button>
        </nav>
    </header>

    <main class="gallery-container">
        <!-- Gallery header -->
        <header class="gallery-header">
            <h1>$if(title)$$title$$else$Art Gallery$endif$</h1>
            $if(subtitle)$<h2>$subtitle$</h2>$endif$
            $if(description)$<p>$description$</p>$endif$
        </header>

        <!-- Gallery filters (optional) -->
        $if(filters)$
        <div class="gallery-filters">
            <h3>Filter by:</h3>
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                $for(filters)$
                <button class="filter-btn" data-filter="$filters.key$">$filters.label$</button>
                $endfor$
            </div>
        </div>
        $endif$

        <!-- Main gallery grid -->
        <div class="gallery-grid" id="gallery-grid">
            $for(artworks)$
            <article class="gallery-item" $if(artworks.category)$data-category="$artworks.category$"$endif$>
                <a href="$artworks.url$">
                    <img src="$artworks.thumbnail$" 
                         alt="$artworks.title$" 
                         $if(artworks.image)$data-src="$artworks.image$"$endif$
                         loading="lazy">
                    <div class="gallery-item-info">
                        <h3>$artworks.title$</h3>
                        <div class="gallery-item-meta">
                            $if(artworks.date)$<time datetime="$artworks.date$">$artworks.date$</time>$endif$
                            $if(artworks.medium)$ Â· $artworks.medium$$endif$
                        </div>
                        $if(artworks.description)$<p>$artworks.description$</p>$endif$
                    </div>
                </a>
            </article>
            $endfor$
        </div>

        <!-- Series sections (optional) -->
        $if(series)$
        <section class="gallery-series">
            <h2>Series</h2>
            $for(series)$
            <div class="series-section">
                <h3>$series.title$</h3>
                $if(series.description)$<p>$series.description$</p>$endif$
                <div class="series-grid">
                    $for(series.artworks)$
                    <article class="gallery-item">
                        <a href="$series.artworks.url$">
                            <img src="$series.artworks.thumbnail$" 
                                 alt="$series.artworks.title$" 
                                 loading="lazy">
                            <div class="gallery-item-info">
                                <h4>$series.artworks.title$</h4>
                                $if(series.artworks.date)$
                                <div class="gallery-item-meta">
                                    <time datetime="$series.artworks.date$">$series.artworks.date$</time>
                                </div>
                                $endif$
                            </div>
                        </a>
                    </article>
                    $endfor$
                </div>
            </div>
            $endfor$
        </section>
        $endif$

        <!-- Additional content -->
        $if(body)$
        <section class="gallery-content">
            $body$
        </section>
        $endif$
    </main>

    <footer>
        <p>&copy; $if(year)$$year$$else$2025$endif$ $if(author)$$author$$else$Your Name$endif$</p>
        <p><a href="/feed.xml">RSS</a> Â· <a href="/sitemap.xml">Sitemap</a></p>
    </footer>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/gallery.js"></script>
</body>
</html>