<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$if(title)$$title$ - $endif$$if(site-title)$$site-title$$else$Your Name$endif$</title>
    $if(description)$<meta name="description" content="$description$">$endif$
    <meta name="author" content="$if(author)$$author$$else$Your Name$endif$">
    $if(date)$<meta name="date" content="$date$">$endif$
    
    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="$title$">
    $if(description)$<meta property="og:description" content="$description$">$endif$
    $if(image)$<meta property="og:image" content="$image$">$endif$
    $if(url)$<meta property="og:url" content="$url$">$endif$
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/artwork.css">
    $if(css)$$for(css)$<link rel="stylesheet" href="$css$">$endfor$$endif$
    
    <!-- Dark mode preference -->
    <script>
        if (localStorage.getItem('theme') === 'dark' || 
            (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }
    </script>
</head>
<body>
    <header>
        <nav>
            <a href="/" class="site-title">$if(site-title)$$site-title$$else$Your Name$endif$</a>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/essays">Essays</a></li>
                <li><a href="/art" class="active">Art</a></li>
                <li><a href="/about">About</a></li>
            </ul>
            <button id="theme-toggle" aria-label="Toggle dark mode">üåô</button>
        </nav>
    </header>

    <main class="artwork-container">
        <article class="artwork">
            <!-- Artwork header -->
            <header class="artwork-header">
                <h1 class="artwork-title">$title$</h1>
                $if(subtitle)$<h2 class="artwork-subtitle">$subtitle$</h2>$endif$
                
                <!-- Artwork metadata -->
                <div class="artwork-meta">
                    $if(date)$<time datetime="$date$" class="artwork-date">$date$</time>$endif$
                    $if(medium)$<span class="artwork-medium">$medium$</span>$endif$
                    $if(dimensions)$<span class="artwork-dimensions">$dimensions$</span>$endif$
                    $if(location)$<span class="artwork-location">$location$</span>$endif$
                    $if(duration)$<span class="artwork-duration">$duration$</span>$endif$
                </div>
                
                <!-- Tags -->
                $if(tags)$
                <div class="artwork-tags">
                    $for(tags)$<span class="tag">$tags$</span>$endfor$
                </div>
                $endif$
            </header>

            <!-- Main artwork display -->
            $if(image)$
            <section class="artwork-display">
                <figure class="artwork-main" id="main-artwork">
                    <img src="$image$" alt="$title$" 
                         id="artwork-image"
                         $if(width)$width="$width$"$endif$
                         $if(height)$height="$height$"$endif$
                         loading="lazy">
                    $if(caption)$
                    <figcaption class="artwork-caption">
                        $caption$
                    </figcaption>
                    $endif$
                </figure>
                
                <!-- Image controls -->
                <div class="image-controls">
                    <button class="control-btn" onclick="toggleFullscreen()" aria-label="Toggle fullscreen">
                        <span class="fullscreen-icon">‚õ∂</span> Fullscreen
                    </button>
                    <button class="control-btn" onclick="toggleZoom()" aria-label="Toggle zoom">
                        <span class="zoom-icon">üîç</span> <span id="zoom-text">Zoom In</span>
                    </button>
                    $if(download)$
                    <a href="$download$" download class="control-btn" aria-label="Download artwork">
                        <span>‚¨á</span> Download
                    </a>
                    $endif$
                </div>
                
                <!-- Image variations -->
                $if(variations)$
                <div class="image-variations">
                    <h4>Variations</h4>
                    <div class="variations-grid">
                        $for(variations)$
                        <button class="variation-btn" 
                                onclick="showVariation('$variations.image$', '$variations.title$')"
                                aria-label="Show variation: $variations.title$">
                            <img src="$variations.thumbnail$" alt="$variations.title$" loading="lazy">
                            <span>$variations.title$</span>
                        </button>
                        $endfor$
                    </div>
                </div>
                $endif$
            </section>
            $endif$

            <!-- Artist statement and content -->
            <section class="artwork-content">
                $if(statement)$
                <div class="artist-statement">
                    <h3>Artist Statement</h3>
                    <div class="statement-content">
                        $statement$
                    </div>
                </div>
                $endif$
                
                <!-- Main content -->
                <div class="artwork-body">
                    $body$
                </div>
            </section>

            <!-- Technical details -->
            $if(technical)$
            <section class="technical-details">
                <h3>Technical Details</h3>
                <dl class="tech-specs">
                    $for(technical)$
                    <dt>$technical.label$</dt>
                    <dd>$technical.value$</dd>
                    $endfor$
                </dl>
            </section>
            $endif$

            <!-- Process documentation -->
            $if(process)$
            <section class="process-section">
                <h3>Process</h3>
                <div class="process-gallery">
                    $for(process)$
                    <figure class="process-step">
                        <img src="$process.image$" alt="$process.description$" loading="lazy">
                        <figcaption>
                            $if(process.step)$<strong>Step $process.step$:</strong> $endif$
                            $process.description$
                        </figcaption>
                    </figure>
                    $endfor$
                </div>
            </section>
            $endif$

            <!-- Series information -->
            $if(series)$
            <section class="series-info">
                <h3>From the Series: <em>$series.title$</em></h3>
                $if(series.description)$<p>$series.description$</p>$endif$
                
                $if(series.artworks)$
                <div class="series-navigation">
                    <h4>Other Works in This Series</h4>
                    <div class="series-grid">
                        $for(series.artworks)$
                        <a href="$series.artworks.url$" class="series-item">
                            <img src="$series.artworks.thumbnail$" alt="$series.artworks.title$" loading="lazy">
                            <span>$series.artworks.title$</span>
                        </a>
                        $endfor$
                    </div>
                </div>
                $endif$
            </section>
            $endif$

            <!-- Artwork footer -->
            <footer class="artwork-footer">
                <div class="artwork-actions">
                    <button onclick="window.print()" class="action-btn">Print</button>
                    <button onclick="copyLink()" class="action-btn">Share</button>
                    $if(purchase)$<a href="$purchase$" class="action-btn purchase-btn">Purchase</a>$endif$
                </div>
                
                $if(related)$
                <section class="related-works">
                    <h4>Related Works</h4>
                    <div class="related-grid">
                        $for(related)$
                        <a href="$related.url$" class="related-item">
                            <img src="$related.thumbnail$" alt="$related.title$" loading="lazy">
                            <span>$related.title$</span>
                        </a>
                        $endfor$
                    </div>
                </section>
                $endif$
                
                <!-- Navigation -->
                <nav class="artwork-nav">
                    $if(prev)$<a href="$prev.url$" class="nav-link prev">‚Üê $prev.title$</a>$endif$
                    <a href="/art" class="nav-link gallery">Gallery</a>
                    $if(next)$<a href="$next.url$" class="nav-link next">$next.title$ ‚Üí</a>$endif$
                </nav>
            </footer>
        </article>
    </main>

    <!-- Fullscreen overlay -->
    <div id="fullscreen-overlay" class="fullscreen-overlay" onclick="exitFullscreen()">
        <img id="fullscreen-image" src="" alt="">
        <button class="fullscreen-close" onclick="exitFullscreen()" aria-label="Close fullscreen">√ó</button>
    </div>

    <footer>
        <p>&copy; $if(year)$$year$$else$2025$endif$ $if(author)$$author$$else$Your Name$endif$</p>
        <p><a href="/feed.xml">RSS</a> ¬∑ <a href="/sitemap.xml">Sitemap</a></p>
    </footer>

    <script src="/static/js/main.js"></script>
    <script src="/static/js/artwork.js"></script>
</body>
</html>